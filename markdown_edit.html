<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>markdown</title>
	<style type="text/css">
		/*body{background-image:url("http://7xku3c.com1.z0.glb.clouddn.com/flower.gif");
		background-repeat:repeat;*/
/*filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod='scale')";
   -moz-background-size:100% 100%;
   background-size:100% 100%;*/
	}
	</style>
	<script src="http://lib.sinaapp.com/js/jquery/1.9.1/jquery-1.9.1.min.js"></script>
	<link href="http://7xku3c.com1.z0.glb.clouddn.com/md_style.css" rel="stylesheet">

	<link href="http://cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://cdn.bootcss.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="http://static.bootcss.com/www/assets/css/site.min.css?v5" rel="stylesheet">
    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github2-53964e9b93636aa437196c028e3b15febd3c6d5a52d4e8368a9c2894932d294e.css" integrity="sha256-U5ZOm5NjaqQ3GWwCjjsV/r08bVpS1Og2ipwolJMtKU4=" media="all" rel="stylesheet" />
</head>
<body>
<div class="container">
	<div class="col-md-5">			
		<div class="content">
			<div>
				<textarea  class="form-control" id="rawContent" name="rawContent" rows="25">{{.RawContent}}</textarea>
			</div>
		</div>
	</div>
	<div class="col-md-7 sidebar" style="background-color:#eee">
		<span id="markdownContent" name="markdownContent">{{.MarkdownContent}}</span>
	</div>
</div>
<script type="text/javascript">
	$(document).ready(function(){
		$("#rawContent").keypress( function(event){
			if ("13"==event.which) {
				rpcmd();
			};
		});
	});

	function CallbackFunc (data){
		// console.log(data.mddata);
		// alert(data.mddata);
		$("#markdownContent").html(data.mddata);
	}
	function rpcmd () {
		$.getJSON("http://localhost:80/markdownCB?callback=?",{"rawContent":$("#rawContent").val()},function (data){
	        console.log(" is a a" + data.mddata);
	    });
		/*$.ajax({  
	        type : "get",  
	        url : "http://localhost:80/markdownCB?callback=?",
	        dataType:"jsonp",
        	jsonpCallback:"CallbackFunc",
        	data:{"rawContent":$("#rawContent").val()},
	        success : function(data){
	        	// alert("ajax"+data.mddata);
	        	// console.log(data.mddata);
	            $("#markdownContent").html(data.mddata);
	        },  
	        error:function(){  
	            alert('fail');  
	        }
	    });*/
		/*$.ajax({
		 // url: 'http://localhost:80/markdown',
		 url: 'markdown',
		 type: 'POST',
		 data:{"rawContent":$("#rawContent").val()},
		 success: function(result) {
		  	$("#markdownContent").html(result);
		  	// console.log(result);
		 }
		});*/
	}
</script>
</body>
</html>